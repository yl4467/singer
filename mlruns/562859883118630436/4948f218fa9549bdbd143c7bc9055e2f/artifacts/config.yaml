audio_path:
- examples/driving_audios/1.wav
audio_separator:
  model_path: /tier2/Video/yanli/hallo_pretrained_models/audio_separator/Kim_Vocal_2.onnx
base_model_path: /tier2/Video/yanli/hallo_pretrained_models/stable-diffusion-v1-5/
cfg_scale: 3.5
checkpointing_steps: 500
data:
  audio_margin: 2
  fps: 25
  n_motion_frames: 2
  n_sample_frames: 14
  sample_rate: 16000
  train_bs: 6
  train_height: 512
  train_meta_paths:
  - /home/yanli/hallo_root/data/sing_stage2.json
  train_width: 512
  val_bs: 1
enable_zero_snr: true
exp_name: stage2
face_analysis_model_path: /tier2/Video/yanli/hallo_pretrained_models/face_analysis
face_expand_ratio: 1.2
inference_steps: 40
mm_path: /tier2/Video/yanli/hallo_pretrained_models/motion_module/mm_sd_v15_v2.ckpt
noise_offset: 0.05
noise_scheduler_kwargs:
  beta_end: 0.012
  beta_schedule: linear
  beta_start: 0.00085
  clip_sample: false
  num_train_timesteps: 1000
  steps_offset: 1
output_dir: /tier2/Video/yanli/exp_output_final
ref_img_path:
- examples/reference_images/1.jpg
resume_from_checkpoint: latest
seed: 42
single_inference_times: 10
snr_gamma: 5.0
solver:
  adam_beta1: 0.9
  adam_beta2: 0.999
  adam_epsilon: 1.0e-08
  adam_weight_decay: 0.01
  enable_xformers_memory_efficient_attention: true
  gradient_accumulation_steps: 1
  gradient_checkpointing: true
  learning_rate: 1.0e-05
  lr_scheduler: constant
  lr_warmup_steps: 1
  max_grad_norm: 1.0
  max_train_steps: 30000
  mixed_precision: 'no'
  scale_lr: false
  use_8bit_adam: true
stage1_ckpt_dir: /home/yanli/sing_diffusion/hallo_pullback/pretrained_models/sub_models/
start_ratio: 0.05
trainable_para:
- audio_modules
- motion_modules
uncond_audio_ratio: 0.05
uncond_ia_ratio: 0.05
uncond_img_ratio: 0.05
unet_additional_kwargs:
  audio_attention_dim: 768
  motion_module_decoder_only: false
  motion_module_kwargs:
    attention_block_types:
    - Temporal_Self
    - Temporal_Self
    num_attention_heads: 8
    num_transformer_block: 1
    temporal_attention_dim_div: 1
    temporal_position_encoding: true
    temporal_position_encoding_max_len: 32
  motion_module_mid_block: true
  motion_module_resolutions:
  - 1
  - 2
  - 4
  - 8
  motion_module_type: Vanilla
  stack_enable_blocks_depth:
  - 0
  - 1
  - 2
  - 3
  stack_enable_blocks_name:
  - up
  - down
  - mid
  unet_use_cross_frame_attention: false
  unet_use_temporal_attention: false
  use_audio_module: true
  use_inflated_groupnorm: true
  use_motion_module: true
vae_model_path: /tier2/Video/yanli/hallo_pretrained_models/sd-vae-ft-mse
val:
  validation_steps: 1000
wav2vec_config:
  audio_type: vocals
  features: all
  model_path: /tier2/Video/yanli/hallo_pretrained_models/wav2vec/wav2vec2-base-960h
  model_scale: base
weight_dtype: fp16
